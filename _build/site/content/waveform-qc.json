{"version":3,"kind":"Notebook","sha256":"d97cbf2cfa0e9b4f0b3fc3dccb52b6b4636063cccaa12b28e8c1f2b51cedf63e","slug":"waveform-qc","location":"/notebooks/Nate/waveform_qc.ipynb","dependencies":[],"frontmatter":{"title":"IRIS Web Services Data Quality Metrics Exercise","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"baker","language":"python"},"authors":[{"id":"Amanda M. Thomas, William Marfo, and Loïc Bachelot","name":"Amanda M. Thomas, William Marfo, and Loïc Bachelot"}],"keywords":["earthquake","catalog","ML","AI"],"numbering":{"title":{"offset":2}},"exports":[{"format":"ipynb","filename":"waveform_qc.ipynb","url":"/waveform_qc-c76fabafd41083824099fe90c6cfdda8.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":":auth: Nate Stevens (Pacific Northwest Seismic Network)\n:email: ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"KesFQGOXSD"},{"type":"link","url":"mailto:ntsteven@uw.edu","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"ntsteven@uw.edu","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ztX9hZpj4K"}],"urlSource":"mailto:ntsteven@uw.edu","key":"oGeKEn8Qgk"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"YQyrpbNymj"},{"type":"text","value":":org: Pacific Northwest Seismic Network","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ntnUEkp3cR"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"h6CBkY91aW"},{"type":"text","value":":license: GPLv3","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ccNgfHwDot"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"XLiUiVl415"},{"type":"text","value":":purpose:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"hnL7JaYTA6"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"WUzrdEDC4N"},{"type":"text","value":"In this notebook we’ll query data quality metrics from the MUSTANG measurements webservice","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"tSSWSL1VZk"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ly1naVEzRL"},{"type":"text","value":"and the FDSNWS availability webservice provided by EarthScope/SAGE to get a sense of data","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"r7PRYBQMD0"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"b28aIDOaWZ"},{"type":"text","value":"availability and usefullness BEFORE downloading a ton of data!","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"VOxLvdj2Jo"}],"key":"nSvMPa2pSa"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"What is MUSTANG? - A continually growing data quality statistics dataset","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"akUNufC65U"},{"type":"break","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"rbhSrPW37N"},{"type":"text","value":"for every seismic station stored on the Data Management Center!","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"Rd8TSdqIyG"}],"key":"lslJgsOQlr"},{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"What does MUSTANG stand for? - The ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"wWh0I2NeR5"},{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"M","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"RHeNwNRykY"}],"key":"dF2P7Vuhm8"},{"type":"text","value":"odular ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"e6gVQebveq"},{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"U","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"ei0yI3Zgwo"}],"key":"R91N1nlYah"},{"type":"text","value":"tility for ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"QhBErPScET"},{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"STA","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"Z6SHmUCvvE"}],"key":"UzDAHy1Ghs"},{"type":"text","value":"tistical k","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"fbsNoZ4qhI"},{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"N","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"wo4pEsI3w4"}],"key":"XbrY6ZXUqA"},{"type":"text","value":"owldege ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"TahyeUEZhQ"},{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"G","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"GS4zvKJJmP"}],"key":"iUefmWjy74"},{"type":"text","value":"athering system","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"nvKalkqaQ4"}],"key":"Mp5efIrY1a"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Where can I go to learn more about MUSTANG?\n","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"C2zw8rLc7B"},{"type":"link","url":"https://service.iris.edu/mustang/","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"https://​service​.iris​.edu​/mustang/","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"mAKQhCHOyR"}],"urlSource":"https://service.iris.edu/mustang/","key":"hPpFS20wwu"}],"key":"xm4K2NwB6p"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Dependencies for this Notebook:","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"w72boKipeo"}],"key":"l5l7cj9n3T"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":20,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ObsPy","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"vSMqDsShmq"}],"key":"aATQVPZEx1"}],"key":"cDH8fVFaSn"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ws_client","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"oybXmIfyBU"},{"type":"text","value":" (","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"aVgnp3GcdO"},{"type":"inlineCode","value":"ws_client.py","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"LMaJpngSy5"},{"type":"text","value":")","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"rG1J3otOmq"}],"key":"uxbHaCK8kb"}],"key":"kQlc40Hh3W"}],"key":"EILAVJLNYa"}],"key":"Kza0rSneGM"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"## IMPORT MODULES\nimport os\nfrom pathlib import Path\nimport pandas as pd\nfrom obspy import UTCDateTime\nfrom obspy.clients.fdsn import Client\n# Tools for data visualization\nimport matplotlib.pyplot as plt\n\n# Custom-Built Clients for fetching data quality measurements from IRIS web services\nfrom ws_client import MustangClient, AvailabilityClient\n\n","key":"dimdqGwphd"},{"type":"outputs","id":"oeEHH6hEOFs1IrMlnSKXK","children":[],"key":"L87DnOLutS"}],"key":"XV4PhKEXdO"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Define absolute paths\nROOT = Path.cwd()\nprint(f'ROOT dir is {ROOT}')\nWFQC = ROOT/'wave_qc_files'\nos.makedirs(str(WFQC), exist_ok=True)","key":"JmiXBYhfA6"},{"type":"outputs","id":"KXUdm8IUZjWv2jJppoEq7","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"ROOT dir is /Users/nates/Code/GitHub/2025_ML_TSC/notebooks/Nate\n"},"children":[],"key":"N0TAiMyShw"}],"key":"EdI0te3KnX"}],"key":"Szh4aSYTme"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Composing a MUSTANG query","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mZ5qty9C3S"}],"identifier":"composing-a-mustang-query","label":"Composing a MUSTANG query","html_id":"composing-a-mustang-query","implicit":true,"key":"lh3WSh83tA"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"v7GNnbVDNc"},{"type":"inlineCode","value":"MustangClient","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"mzRLa0jQQW"},{"type":"text","value":" class’ ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"l6eZogJd4t"},{"type":"inlineCode","value":"get_metrics","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"TAhJqZ11Rd"},{"type":"text","value":" follows the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ulXUnvUpp5"},{"type":"inlineCode","value":"key=value","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"MQcbZqVTB4"},{"type":"text","value":" syntax of the MUSTANG measurements service interface","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"i8PyYkqySe"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"BsJpXYp12r"},{"type":"text","value":"(","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"kpYMA8PfYy"},{"type":"link","url":"https://service.iris.edu/mustang/measurements/1/","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"https://​service​.iris​.edu​/mustang​/measurements​/1/","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"kAWTej3Kx0"}],"urlSource":"https://service.iris.edu/mustang/measurements/1/","key":"vYU2IVac6d"},{"type":"text","value":")","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"RYsUlinXO5"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"FdXs4Uf0c6"},{"type":"text","value":"where multiple values can be provided as a comma-delimited string.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ct3CtwSi1l"}],"key":"JtqGq1KHqv"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"This version of the ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"v4nRkTUtCc"},{"type":"inlineCode","value":"MustangClient","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"WGexyzv51F"},{"type":"text","value":" can also parse lists of metric names (see below).","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"olINlmRQvw"}],"key":"ftSQGIikKA"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"The full list of MUSTANG metrics and detailed descriptions of their meaning can be found at the link above.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"b9cat7gPEj"}],"key":"fe03J21fLL"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"The metrics we’ll use in this exercise are:","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"dkkIpyeq4C"}],"key":"Danpvv4jb4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"inlineCode","value":"sample_min","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"aGacOx1olI"}],"key":"e6KVT1D3is"},{"type":"text","value":": the minimum sample value observed in a 24 hour period","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"kPBdrbAZbS"}],"key":"Ftbl2ZMtyn"}],"key":"Lhl8BWQqKX"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"inlineCode","value":"max_range","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"XhDdzIatqZ"}],"key":"wHe2XkckNt"},{"type":"text","value":": the maximum range between any two samples in a 5 minute window within a 24 hour period","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"hH4kMdkBds"}],"key":"eqXS4VrYKR"}],"key":"jXKdSTKCvV"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"inlineCode","value":"percent_availability","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"rjF0hkK2dJ"}],"key":"mTT9Z1uja7"},{"type":"text","value":": the percent of a 24 hour period for which there are data","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"v3bCwA5YtK"}],"key":"Zrz74WUCAL"}],"key":"ydT6RvDvh2"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"inlineCode","value":"sample_unique","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"TpsrVhALHR"}],"key":"pYhMAnu7G4"},{"type":"text","value":": number of unique sample values reported in a 24 hour window","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"PW32esc1yz"}],"key":"Zzcm2vT2Ut"}],"key":"JfHYzLQoKx"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"inlineCode","value":"num_gaps","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"Imw2zUVPxz"}],"key":"ZClD5w1m29"},{"type":"text","value":": number of data gaps encountered within a 24 hour window","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"DgUrjpc8Cx"}],"key":"Camr8uE84o"}],"key":"YWZBPK6V9u"}],"key":"Rgy9FDuVO3"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"The seismic station we’re looking at is UW.MBW.01.EHZ, one of the longest running stations in the PNSN that","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"aUsLc7RKbr"},{"type":"break","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"IUKR4qSuev"},{"type":"text","value":"monitored Mount Baker volcano until late 2023 when it was replaced with UW.MBW2.","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"zJZr8HwIt1"}],"key":"yWBbtzQN6r"},{"type":"heading","depth":4,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"UW.MBW was having some issues towards the end of its life, can you find spots where it looks like the data might not be as useful?","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"OxKfIuwITJ"}],"identifier":"uw-mbw-was-having-some-issues-towards-the-end-of-its-life-can-you-find-spots-where-it-looks-like-the-data-might-not-be-as-useful","label":"UW.MBW was having some issues towards the end of its life, can you find spots where it looks like the data might not be as useful?","html_id":"uw-mbw-was-having-some-issues-towards-the-end-of-its-life-can-you-find-spots-where-it-looks-like-the-data-might-not-be-as-useful","implicit":true,"key":"Y5tmxrvhSN"}],"key":"QG5sHeKk3C"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Initialize the client\nmclient = MustangClient()\n# Compose a query for MUSTANG metrics for an analog seismometer near Mount Baker (Washington, USA)\nmetric = ['sample_min','max_range','percent_availability','sample_unique','num_gaps']\nquery = {'metric': metric,\n            'net':'UW',\n            'sta':'MBW',\n            'loc':'*',\n            'cha':'EHZ'}\n# Run query (sometimes this requires a few start/stops - something to do with `requests` internal workings)\ndf_m = mclient.measurements_request(**query)\n# Write to disk ()\ndf_m.to_csv(WFQC/'UW.MBW_MUSTANG_metrics.csv', header=True, index=True)","key":"osGmVDBo1Q"},{"type":"outputs","id":"TKTNxNZF-MXq3P-Y2IYc4","children":[],"key":"gQ8iLf1PQk"}],"key":"z39Y0b1q7v"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Just in case we need to load from disk because `requests` is struggling\ntry:\n    display(df_m)\nexcept NameError:\n    df_m = pd.read_csv(WFQC/'UW.MBW_MUSTANG_metrics.csv', index_col=['start','target'], parse_dates=['start'])\n    display(df_m)","key":"z0iMwpqaQT"},{"type":"outputs","id":"9f5X1m3DKvx69gG-84B0i","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th></th>\n      <th>max_range</th>\n      <th>num_gaps</th>\n      <th>sample_unique</th>\n      <th>sample_min</th>\n      <th>percent_availability</th>\n    </tr>\n    <tr>\n      <th>start</th>\n      <th>target</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>2025-02-11</th>\n      <th>UW.MBW.01.EHZ.M</th>\n      <td>3399.0</td>\n      <td>3.0</td>\n      <td>22.0</td>\n      <td>0.0</td>\n      <td>94.203</td>\n    </tr>\n    <tr>\n      <th>2025-02-10</th>\n      <th>UW.MBW.01.EHZ.M</th>\n      <td>3380.0</td>\n      <td>3.0</td>\n      <td>27.0</td>\n      <td>0.0</td>\n      <td>99.985</td>\n    </tr>\n    <tr>\n      <th>2025-02-09</th>\n      <th>UW.MBW.01.EHZ.M</th>\n      <td>3379.0</td>\n      <td>3.0</td>\n      <td>14.0</td>\n      <td>0.0</td>\n      <td>99.739</td>\n    </tr>\n    <tr>\n      <th>2025-02-08</th>\n      <th>UW.MBW.01.EHZ.M</th>\n      <td>3381.0</td>\n      <td>3.0</td>\n      <td>17.0</td>\n      <td>0.0</td>\n      <td>99.993</td>\n    </tr>\n    <tr>\n      <th>2025-02-07</th>\n      <th>UW.MBW.01.EHZ.M</th>\n      <td>3394.0</td>\n      <td>6.0</td>\n      <td>23.0</td>\n      <td>0.0</td>\n      <td>99.990</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>1987-03-20</th>\n      <th>UW.MBW..EHZ.M</th>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>0.000</td>\n    </tr>\n    <tr>\n      <th>1987-01-16</th>\n      <th>UW.MBW..EHZ.M</th>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>0.000</td>\n    </tr>\n    <tr>\n      <th>1987-01-14</th>\n      <th>UW.MBW..EHZ.M</th>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>0.000</td>\n    </tr>\n    <tr>\n      <th>1987-01-26</th>\n      <th>UW.MBW..EHZ.M</th>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>0.000</td>\n    </tr>\n    <tr>\n      <th>1987-01-27</th>\n      <th>UW.MBW..EHZ.M</th>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>0.000</td>\n    </tr>\n  </tbody>\n</table>\n<p>17093 rows × 5 columns</p>\n</div>","content_type":"text/html"},"text/plain":{"content":"                            max_range  num_gaps  sample_unique  sample_min  \\\nstart      target                                                            \n2025-02-11 UW.MBW.01.EHZ.M     3399.0       3.0           22.0         0.0   \n2025-02-10 UW.MBW.01.EHZ.M     3380.0       3.0           27.0         0.0   \n2025-02-09 UW.MBW.01.EHZ.M     3379.0       3.0           14.0         0.0   \n2025-02-08 UW.MBW.01.EHZ.M     3381.0       3.0           17.0         0.0   \n2025-02-07 UW.MBW.01.EHZ.M     3394.0       6.0           23.0         0.0   \n...                               ...       ...            ...         ...   \n1987-03-20 UW.MBW..EHZ.M          NaN       NaN            NaN         NaN   \n1987-01-16 UW.MBW..EHZ.M          NaN       NaN            NaN         NaN   \n1987-01-14 UW.MBW..EHZ.M          NaN       NaN            NaN         NaN   \n1987-01-26 UW.MBW..EHZ.M          NaN       NaN            NaN         NaN   \n1987-01-27 UW.MBW..EHZ.M          NaN       NaN            NaN         NaN   \n\n                            percent_availability  \nstart      target                                 \n2025-02-11 UW.MBW.01.EHZ.M                94.203  \n2025-02-10 UW.MBW.01.EHZ.M                99.985  \n2025-02-09 UW.MBW.01.EHZ.M                99.739  \n2025-02-08 UW.MBW.01.EHZ.M                99.993  \n2025-02-07 UW.MBW.01.EHZ.M                99.990  \n...                                          ...  \n1987-03-20 UW.MBW..EHZ.M                   0.000  \n1987-01-16 UW.MBW..EHZ.M                   0.000  \n1987-01-14 UW.MBW..EHZ.M                   0.000  \n1987-01-26 UW.MBW..EHZ.M                   0.000  \n1987-01-27 UW.MBW..EHZ.M                   0.000  \n\n[17093 rows x 5 columns]","content_type":"text/plain"}}},"children":[],"key":"lE8pZ0yMRY"}],"key":"nlOnf7WSZI"}],"key":"xyeuBoDpjj"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"fig = plt.figure(figsize=(8,12))\ngs = fig.add_gridspec(nrows=len(df_m.columns), hspace=0)\n\nfor _e, _c in enumerate(df_m.columns):\n    ax = fig.add_subplot(gs[_e])\n    ax.plot(df_m.index.get_level_values(0), df_m[_c].values, '.', label=_c)\n    ax.set_ylabel(_c)\n    ax.grid()\n","key":"oA2zsUTgVR"},{"type":"outputs","id":"Ekxy7XtwH9dWS5JfG9wV2","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"5012ab4c18fad9e7a614861db52aad1c","path":"/5012ab4c18fad9e7a614861db52aad1c.png"},"text/plain":{"content":"<Figure size 800x1200 with 5 Axes>","content_type":"text/plain"}}},"children":[],"key":"AKFU4zcLur"}],"key":"E2IvGESHuV"}],"key":"XwlXbFzfUU"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Lots of gaps","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pfnaQIXBT1"}],"identifier":"lots-of-gaps","label":"Lots of gaps","html_id":"lots-of-gaps","implicit":true,"key":"KcnobugETx"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Trying to bulk download gappy data from webservices can result in the entire request crashing.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"kinLUxnq0g"}],"key":"RXbbXdMOlT"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"If we can request with information on data availability (and which data seem to have meaning) then this job becomes easier.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"uHQgdKyhIx"}],"key":"lyJudkEHX6"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Thankfully data availability is already documented by the NSF SAGE Facility FDSN Web Service!","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"lcW0Evaosu"}],"key":"pjgcCLnneT"}],"key":"SPughdlhbG"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Running a FDSN Web Service query","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HbVCRmtErR"}],"identifier":"running-a-fdsn-web-service-query","label":"Running a FDSN Web Service query","html_id":"running-a-fdsn-web-service-query","implicit":true,"key":"kx48L9uHqo"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Use the custom-built ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FmtfYA2T4T"},{"type":"inlineCode","value":"AvailabilityClient","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JV52ao39OS"},{"type":"text","value":" class that follows the syntax of the","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Lojola14uQ"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rZtizUkl7n"},{"type":"text","value":"related webservice: ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"U0FmmTVPfm"},{"type":"link","url":"https://service.iris.edu/fdsnws/availability/1/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"https://​service​.iris​.edu​/fdsnws​/availability​/1/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mZykC0I2dp"}],"urlSource":"https://service.iris.edu/fdsnws/availability/1/","key":"vJYLQP9hjb"}],"key":"LnmsDdAsSY"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"For this example we’ll keep looking at station UW.MBW.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"KY5iLqQqx4"}],"key":"rzzkW3bKKc"}],"key":"cGTxI5QuDA"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Initialize the client\naclient = AvailabilityClient()\n# Run a data availability request for everything UW.MBW.*.EHZ has to offer\ndf_a = aclient.availability_request(sta='MBW',net='UW',cha='EHZ')\n# Write to disk\ndf_a.to_csv(WFQC/'UW.MBW_Availability.csv', header=True, index=True)","key":"TveNDODig3"},{"type":"outputs","id":"mu4K11szGToOV0QXx-EZ7","children":[],"key":"sesgGupbp7"}],"key":"iXfUBJJ4CF"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Take a look at the query results (and an option to read from disk for exercise expediancy)\ntry:\n    display(df_a)\nexcept NameError:\n    df_m = pd.read_csv(WFQC/'UW.MBW_Availability.csv', index_col=[0], parse_dates=['Earliest','Latest'])\n    display(df_a)","key":"U5HhawfhUK"},{"type":"outputs","id":"rGzzPSnWiK9k8XhOvMFp4","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Network</th>\n      <th>Station</th>\n      <th>Location</th>\n      <th>Channel</th>\n      <th>Quality</th>\n      <th>SampleRate</th>\n      <th>Earliest</th>\n      <th>Latest</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td></td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>104.082</td>\n      <td>1980-01-11 21:40:16.543800+00:00</td>\n      <td>1980-01-11 21:41:08.185791+00:00</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td></td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>104.084</td>\n      <td>1980-01-15 05:34:14.273800+00:00</td>\n      <td>1980-01-15 05:34:53.617023+00:00</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td></td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>104.079</td>\n      <td>1980-01-17 05:39:19.142000+00:00</td>\n      <td>1980-01-17 05:40:03.406475+00:00</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td></td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>104.082</td>\n      <td>1980-01-25 22:40:03.229300+00:00</td>\n      <td>1980-01-25 22:40:54.871291+00:00</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td></td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>104.069</td>\n      <td>1980-01-27 23:41:48.775700+00:00</td>\n      <td>1980-01-27 23:42:15.825070+00:00</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>91602</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td>01</td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>100.000</td>\n      <td>2025-02-10 08:00:03+00:00</td>\n      <td>2025-02-10 08:00:03.990000+00:00</td>\n    </tr>\n    <tr>\n      <th>91603</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td>01</td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>100.000</td>\n      <td>2025-02-10 08:00:04.200000+00:00</td>\n      <td>2025-02-10 08:00:33.190000+00:00</td>\n    </tr>\n    <tr>\n      <th>91604</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td>01</td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>100.000</td>\n      <td>2025-02-10 08:00:45.400000+00:00</td>\n      <td>2025-02-11 08:00:01.390000+00:00</td>\n    </tr>\n    <tr>\n      <th>91605</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td>01</td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>100.000</td>\n      <td>2025-02-11 08:00:06.100000+00:00</td>\n      <td>2025-02-11 08:01:02.090000+00:00</td>\n    </tr>\n    <tr>\n      <th>91606</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td>01</td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>100.000</td>\n      <td>2025-02-11 08:01:03+00:00</td>\n      <td>2025-02-11 22:36:36.990000+00:00</td>\n    </tr>\n  </tbody>\n</table>\n<p>91607 rows × 8 columns</p>\n</div>","content_type":"text/html"},"text/plain":{"content":"      Network Station Location Channel Quality  SampleRate  \\\n0          UW     MBW              EHZ       M     104.082   \n1          UW     MBW              EHZ       M     104.084   \n2          UW     MBW              EHZ       M     104.079   \n3          UW     MBW              EHZ       M     104.082   \n4          UW     MBW              EHZ       M     104.069   \n...       ...     ...      ...     ...     ...         ...   \n91602      UW     MBW       01     EHZ       M     100.000   \n91603      UW     MBW       01     EHZ       M     100.000   \n91604      UW     MBW       01     EHZ       M     100.000   \n91605      UW     MBW       01     EHZ       M     100.000   \n91606      UW     MBW       01     EHZ       M     100.000   \n\n                              Earliest                           Latest  \n0     1980-01-11 21:40:16.543800+00:00 1980-01-11 21:41:08.185791+00:00  \n1     1980-01-15 05:34:14.273800+00:00 1980-01-15 05:34:53.617023+00:00  \n2     1980-01-17 05:39:19.142000+00:00 1980-01-17 05:40:03.406475+00:00  \n3     1980-01-25 22:40:03.229300+00:00 1980-01-25 22:40:54.871291+00:00  \n4     1980-01-27 23:41:48.775700+00:00 1980-01-27 23:42:15.825070+00:00  \n...                                ...                              ...  \n91602        2025-02-10 08:00:03+00:00 2025-02-10 08:00:03.990000+00:00  \n91603 2025-02-10 08:00:04.200000+00:00 2025-02-10 08:00:33.190000+00:00  \n91604 2025-02-10 08:00:45.400000+00:00 2025-02-11 08:00:01.390000+00:00  \n91605 2025-02-11 08:00:06.100000+00:00 2025-02-11 08:01:02.090000+00:00  \n91606        2025-02-11 08:01:03+00:00 2025-02-11 22:36:36.990000+00:00  \n\n[91607 rows x 8 columns]","content_type":"text/plain"}}},"children":[],"key":"RqZgRSFXIH"}],"key":"cJEEz0NTGY"}],"key":"VLjbQ0LSsc"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What is going on with the sampling rates?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IJtwTgmLyj"}],"identifier":"what-is-going-on-with-the-sampling-rates","label":"What is going on with the sampling rates?","html_id":"what-is-going-on-with-the-sampling-rates","implicit":true,"key":"mjL4cMAWQa"}],"key":"lCy9qJ0ZdJ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"_series = pd.Series(df_a.SampleRate.values, index=df_a.Earliest.values)\nax = _series.plot()\nax.set_ylabel('Sampling Rate [sps]')","key":"P7Etywxw5m"},{"type":"outputs","id":"iDlWG9fYMfCH6loY-HyDI","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"e6a6b43ae6b27b8e05f2632ff165ebbb","path":"/e6a6b43ae6b27b8e05f2632ff165ebbb.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"GwaAIEygvK"}],"key":"Zh3e3MRJ3E"}],"key":"tVH8jeVRFq"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now lets’ finally look at some data!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yfCQ1YtJJs"}],"identifier":"now-lets-finally-look-at-some-data","label":"Now lets’ finally look at some data!","html_id":"now-lets-finally-look-at-some-data","implicit":true,"key":"QL1aW1wlxf"}],"key":"ZlvA8Ywu7c"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Get an obspy client for fetching waveforms\nwclient = Client('IRIS')","key":"u5QoP1seBW"},{"type":"outputs","id":"Pha2XKNXwc4MFlDQgcCrx","children":[],"key":"QAvVYva24g"}],"key":"xcMILjRCsm"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Subset available segments to a time window (currently uses pandas Timestamp objects)\n_df_a = df_a[(df_a.Earliest >= pd.Timestamp('2023-02-19',tz='UTC')) & (df_a.Latest <= pd.Timestamp('2023-02-21',tz='UTC'))]\ndisplay(_df_a)","key":"ufOLfYElh8"},{"type":"outputs","id":"I6fhwUzcEBNfmQhvPIKXA","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Network</th>\n      <th>Station</th>\n      <th>Location</th>\n      <th>Channel</th>\n      <th>Quality</th>\n      <th>SampleRate</th>\n      <th>Earliest</th>\n      <th>Latest</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>86172</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td>01</td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>100.0</td>\n      <td>2023-02-19 02:18:28.300000+00:00</td>\n      <td>2023-02-19 02:19:31.290000+00:00</td>\n    </tr>\n    <tr>\n      <th>86173</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td>01</td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>100.0</td>\n      <td>2023-02-19 02:19:32.400000+00:00</td>\n      <td>2023-02-19 08:00:02.390000+00:00</td>\n    </tr>\n    <tr>\n      <th>86174</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td>01</td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>100.0</td>\n      <td>2023-02-19 08:00:06.300000+00:00</td>\n      <td>2023-02-19 12:01:02.290000+00:00</td>\n    </tr>\n    <tr>\n      <th>86175</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td>01</td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>100.0</td>\n      <td>2023-02-19 12:01:03.200000+00:00</td>\n      <td>2023-02-20 01:02:49.190000+00:00</td>\n    </tr>\n    <tr>\n      <th>86176</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td>01</td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>100.0</td>\n      <td>2023-02-20 01:02:50.100000+00:00</td>\n      <td>2023-02-20 02:45:06.090000+00:00</td>\n    </tr>\n    <tr>\n      <th>86177</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td>01</td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>100.0</td>\n      <td>2023-02-20 02:45:06.200000+00:00</td>\n      <td>2023-02-20 02:46:26.190000+00:00</td>\n    </tr>\n    <tr>\n      <th>86178</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td>01</td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>100.0</td>\n      <td>2023-02-20 02:46:27.200000+00:00</td>\n      <td>2023-02-20 08:00:01.190000+00:00</td>\n    </tr>\n    <tr>\n      <th>86179</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td>01</td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>100.0</td>\n      <td>2023-02-20 08:00:05.800000+00:00</td>\n      <td>2023-02-20 08:00:43.790000+00:00</td>\n    </tr>\n    <tr>\n      <th>86180</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td>01</td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>100.0</td>\n      <td>2023-02-20 08:00:43.900000+00:00</td>\n      <td>2023-02-20 11:02:01.890000+00:00</td>\n    </tr>\n    <tr>\n      <th>86181</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td>01</td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>100.0</td>\n      <td>2023-02-20 11:05:19.900000+00:00</td>\n      <td>2023-02-20 13:40:36.890000+00:00</td>\n    </tr>\n    <tr>\n      <th>86182</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td>01</td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>100.0</td>\n      <td>2023-02-20 13:40:37+00:00</td>\n      <td>2023-02-20 13:42:52.990000+00:00</td>\n    </tr>\n    <tr>\n      <th>86183</th>\n      <td>UW</td>\n      <td>MBW</td>\n      <td>01</td>\n      <td>EHZ</td>\n      <td>M</td>\n      <td>100.0</td>\n      <td>2023-02-20 13:42:53.100000+00:00</td>\n      <td>2023-02-20 16:10:36.090000+00:00</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"      Network Station Location Channel Quality  SampleRate  \\\n86172      UW     MBW       01     EHZ       M       100.0   \n86173      UW     MBW       01     EHZ       M       100.0   \n86174      UW     MBW       01     EHZ       M       100.0   \n86175      UW     MBW       01     EHZ       M       100.0   \n86176      UW     MBW       01     EHZ       M       100.0   \n86177      UW     MBW       01     EHZ       M       100.0   \n86178      UW     MBW       01     EHZ       M       100.0   \n86179      UW     MBW       01     EHZ       M       100.0   \n86180      UW     MBW       01     EHZ       M       100.0   \n86181      UW     MBW       01     EHZ       M       100.0   \n86182      UW     MBW       01     EHZ       M       100.0   \n86183      UW     MBW       01     EHZ       M       100.0   \n\n                              Earliest                           Latest  \n86172 2023-02-19 02:18:28.300000+00:00 2023-02-19 02:19:31.290000+00:00  \n86173 2023-02-19 02:19:32.400000+00:00 2023-02-19 08:00:02.390000+00:00  \n86174 2023-02-19 08:00:06.300000+00:00 2023-02-19 12:01:02.290000+00:00  \n86175 2023-02-19 12:01:03.200000+00:00 2023-02-20 01:02:49.190000+00:00  \n86176 2023-02-20 01:02:50.100000+00:00 2023-02-20 02:45:06.090000+00:00  \n86177 2023-02-20 02:45:06.200000+00:00 2023-02-20 02:46:26.190000+00:00  \n86178 2023-02-20 02:46:27.200000+00:00 2023-02-20 08:00:01.190000+00:00  \n86179 2023-02-20 08:00:05.800000+00:00 2023-02-20 08:00:43.790000+00:00  \n86180 2023-02-20 08:00:43.900000+00:00 2023-02-20 11:02:01.890000+00:00  \n86181 2023-02-20 11:05:19.900000+00:00 2023-02-20 13:40:36.890000+00:00  \n86182        2023-02-20 13:40:37+00:00 2023-02-20 13:42:52.990000+00:00  \n86183 2023-02-20 13:42:53.100000+00:00 2023-02-20 16:10:36.090000+00:00  ","content_type":"text/plain"}}},"children":[],"key":"OLDTqdmRup"}],"key":"cdu4D7d2qV"}],"key":"jhEsaUbgMt"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Compose a bulk request\nbulk = []\nfor _, row in _df_a.iterrows():\n    # Switch pandas Timestamp objects back to UTCDateTime objects for requests\n    req = (row.Network, row.Station, row.Location, row.Channel, UTCDateTime(row.Earliest.timestamp()), UTCDateTime(row.Latest.timestamp()))\n    bulk.append(req)\ndisplay(bulk)","key":"PctWNbWjSN"},{"type":"outputs","id":"FQPmmT7kselrlp6FElYoT","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"[('UW',\n  'MBW',\n  '01',\n  'EHZ',\n  2023-02-19T02:18:28.300000Z,\n  2023-02-19T02:19:31.290000Z),\n ('UW',\n  'MBW',\n  '01',\n  'EHZ',\n  2023-02-19T02:19:32.400000Z,\n  2023-02-19T08:00:02.390000Z),\n ('UW',\n  'MBW',\n  '01',\n  'EHZ',\n  2023-02-19T08:00:06.300000Z,\n  2023-02-19T12:01:02.290000Z),\n ('UW',\n  'MBW',\n  '01',\n  'EHZ',\n  2023-02-19T12:01:03.200000Z,\n  2023-02-20T01:02:49.190000Z),\n ('UW',\n  'MBW',\n  '01',\n  'EHZ',\n  2023-02-20T01:02:50.100000Z,\n  2023-02-20T02:45:06.090000Z),\n ('UW',\n  'MBW',\n  '01',\n  'EHZ',\n  2023-02-20T02:45:06.200000Z,\n  2023-02-20T02:46:26.190000Z),\n ('UW',\n  'MBW',\n  '01',\n  'EHZ',\n  2023-02-20T02:46:27.200000Z,\n  2023-02-20T08:00:01.190000Z),\n ('UW',\n  'MBW',\n  '01',\n  'EHZ',\n  2023-02-20T08:00:05.800000Z,\n  2023-02-20T08:00:43.790000Z),\n ('UW',\n  'MBW',\n  '01',\n  'EHZ',\n  2023-02-20T08:00:43.900000Z,\n  2023-02-20T11:02:01.890000Z),\n ('UW',\n  'MBW',\n  '01',\n  'EHZ',\n  2023-02-20T11:05:19.900000Z,\n  2023-02-20T13:40:36.890000Z),\n ('UW',\n  'MBW',\n  '01',\n  'EHZ',\n  2023-02-20T13:40:37.000000Z,\n  2023-02-20T13:42:52.990000Z),\n ('UW',\n  'MBW',\n  '01',\n  'EHZ',\n  2023-02-20T13:42:53.100000Z,\n  2023-02-20T16:10:36.090000Z)]","content_type":"text/plain"}}},"children":[],"key":"igNkcpLPPK"}],"key":"UpVZMZ1sKw"}],"key":"UZiPw9lvMP"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Run bulk request\nst = wclient.get_waveforms_bulk(bulk)\nst.plot()","key":"loWhJbPW57"},{"type":"outputs","id":"1AfslIk0zVSSPpkJ8NEfo","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"3e0baf355e9b016289709072cf47fa43","path":"/3e0baf355e9b016289709072cf47fa43.png"},"text/plain":{"content":"<Figure size 800x250 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"ToWIdC6gox"},{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":13,"metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"3e0baf355e9b016289709072cf47fa43","path":"/3e0baf355e9b016289709072cf47fa43.png"},"text/plain":{"content":"<Figure size 800x250 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"XAp0haLGmv"}],"key":"WSWCxfoiMw"}],"key":"JTapXAXxWc"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"It looks like we have continuous data...","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"miWJnxNuhu"}],"identifier":"it-looks-like-we-have-continuous-data","label":"It looks like we have continuous data...","html_id":"it-looks-like-we-have-continuous-data","implicit":true,"key":"wgjC0gx1Tw"},{"type":"heading","depth":4,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Are they continuous?","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"OFo5uQq9bT"}],"identifier":"are-they-continuous","label":"Are they continuous?","html_id":"are-they-continuous","implicit":true,"key":"bESQgiCisk"},{"type":"heading","depth":4,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Where do they stop being useful?","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XWttDqTvqT"}],"identifier":"where-do-they-stop-being-useful","label":"Where do they stop being useful?","html_id":"where-do-they-stop-being-useful","implicit":true,"key":"Jdd6j3xVV7"},{"type":"heading","depth":4,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"What does this mean for your workflow?","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"E4roLKzIbO"}],"identifier":"what-does-this-mean-for-your-workflow","label":"What does this mean for your workflow?","html_id":"what-does-this-mean-for-your-workflow","implicit":true,"key":"bUkLLmTTNm"}],"key":"YigifLiXCS"}],"key":"yfGOwkl7YU"},"references":{"cite":{"order":[],"data":{}}}}